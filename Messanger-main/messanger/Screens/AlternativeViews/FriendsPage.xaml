<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="messanger.Screens.AlternativeViews.FriendsPage">


    <Grid>

        <!-- Grid Definitions -->
        <Grid.RowDefinitions>
            
            <!-- Extra details top bar -->
            <RowDefinition Height="50" />

            <!-- Central content box -->
            <RowDefinition Height="1*" />

            <!-- bottom options bar -->
            <RowDefinition Height="50" />
            
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            
            <!-- Central main content column -->
            <ColumnDefinition Width="24*" />
            
            <!-- Auxillery right column -->
            <ColumnDefinition Width="340" />
            
        </Grid.ColumnDefinitions>
        <!-- Grid Definitions -->


        <!-- Top Central Bar, FriendsList Variant -->
        <Grid Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" BackgroundColor="#313338">
            <!-- One Row -->
            <Grid.RowDefinitions>
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <!-- One columns -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120" />
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>

            <StackLayout Grid.Column="0" Grid.Row="1" HorizontalOptions="Center" VerticalOptions="Center" Orientation="Horizontal">
                <BoxView WidthRequest="20" HeightRequest="20" Margin="0,0,2,0" VerticalOptions="Center" HorizontalOptions="Start"></BoxView>
                <Label Text="Friends" VerticalOptions="Center" TextColor="White"  Margin="10,0" />
                <BoxView WidthRequest="1" HeightRequest="20" VerticalOptions="Center" Margin="5,0,0,0" HorizontalOptions="End"></BoxView>
            </StackLayout>

            <StackLayout Grid.Column="1" Grid.Row="1" HorizontalOptions="StartAndExpand" VerticalOptions="Center" Orientation="Horizontal">


                <Button Grid.Column="0" Grid.Row="0" Padding="10,0" Margin="10,0" MaximumHeightRequest="25" MinimumHeightRequest="25"
                    FontSize="15" CornerRadius="5" Text="Online" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="Transparent"
                    TextColor="White"
                    Command="{Binding ShowOnline}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.90" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver" >
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#565961"/>
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>
                </Button>


                <Button Grid.Column="0" Grid.Row="0" Padding="10,0" Margin="10,0" MaximumHeightRequest="25" MinimumHeightRequest="25"
                    FontSize="15" CornerRadius="5" Text="All" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="Transparent"
                    TextColor="White"
                    Command="{Binding ShowAll}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.90" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver" >
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#565961"/>
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>
                </Button>



                <Button Grid.Column="0" Grid.Row="0" Padding="10,0" Margin="10,0" MaximumHeightRequest="25" MinimumHeightRequest="25"
                    FontSize="15" CornerRadius="5" Text="Pending" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="Transparent"
                    TextColor="White" Command="{Binding ShowPending}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.90" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver" >
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#565961"/>
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>
                </Button>



                <Button Grid.Column="0" Grid.Row="0" Padding="10,0" Margin="10,0" MaximumHeightRequest="25" MinimumHeightRequest="25"
                    FontSize="15" CornerRadius="5" Text="Blocked" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="Transparent"
                    TextColor="White" Command="{Binding ShowBlocked}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.90" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver" >
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#565961"/>
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>
                </Button>


                <Button
                Grid.Column="0"
                Grid.Row="0"
                Padding="10,0"
                Margin="0,0"
                MaximumHeightRequest="25"
                MinimumHeightRequest="25"
                FontSize="15"
                CornerRadius="5"
                Text="Add Friend"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                BackgroundColor="#248045"
                TextColor="White"
                Command="{Binding ShowAddFriend}">

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroupList>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Scale" Value="0.90" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOver" >
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#565961"/>
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateGroupList>
                    </VisualStateManager.VisualStateGroups>
                </Button>


            </StackLayout>

            <BoxView HeightRequest="1" Grid.ColumnSpan="2" BackgroundColor="#282a2e" VerticalOptions="End" />
        </Grid>




        <!-- View friends Tab -->
        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Grid.RowSpan="2" BackgroundColor="#313338" IsVisible="{Binding IsOnlineVisible}">
            <!-- One Row -->
            <Grid.RowDefinitions>
                <RowDefinition Height="70" />
                <RowDefinition Height="20" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <!-- One columns -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>

            <Border  Grid.Row="0" Grid.Column="0" Stroke="#1e1f22" StrokeShape="RoundRectangle 5,5,5,5" StrokeThickness="0" Background="#1e1f22" HorizontalOptions="FillAndExpand" VerticalOptions="Center" HeightRequest="35" Margin="30,0">
                <Entry x:Name="OnlineSearchBar" Placeholder="Search" BackgroundColor="Transparent"  HorizontalOptions="FillAndExpand" VerticalOptions="StartAndExpand"  TextColor="#8597a4" FontSize="18" HeightRequest="35" MinimumHeightRequest="35" />
            </Border>
            <Label Grid.Row="1" Grid.Column="0" Text="ONLINE - X" HorizontalOptions="Start" VerticalOptions="CenterAndExpand" TextColor="#869BA4" FontSize="12" Margin="30,0"/>

        </Grid>

        <!-- View friends Tab -->
        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Grid.RowSpan="2" BackgroundColor="#313338" IsVisible="{Binding IsAllVisible}">
            <!-- One Row -->
            <Grid.RowDefinitions>
                <RowDefinition Height="70" />
                <RowDefinition Height="20" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <!-- One columns -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>

            <Border  Grid.Row="0" Grid.Column="0" Stroke="#1e1f22" StrokeShape="RoundRectangle 5,5,5,5" StrokeThickness="0" Background="#1e1f22" HorizontalOptions="FillAndExpand" VerticalOptions="Center" HeightRequest="35" Margin="30,0">
                <Entry x:Name="AllSearchBar" Placeholder="Search" BackgroundColor="Transparent"  HorizontalOptions="FillAndExpand" VerticalOptions="StartAndExpand"  TextColor="#8597a4" FontSize="18" HeightRequest="35" MinimumHeightRequest="35" />
            </Border>
            <Label Grid.Row="1" Grid.Column="0" Text="All (TestMode View everyone) - X" HorizontalOptions="Start" VerticalOptions="CenterAndExpand" TextColor="#869BA4" FontSize="12" Margin="30,0"/>


            <ScrollView Grid.Row="2" Grid.Column="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" Margin="30,30">
                <StackLayout BindableLayout.ItemsSource="{Binding ServerList.Users}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>


                            <Grid  HorizontalOptions="FillAndExpand" HeightRequest="60" >
                                <!-- One Row -->
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="30" />
                                    <RowDefinition Height="30" />
                                </Grid.RowDefinitions>

                                <!-- One columns -->
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40" />
                                    <ColumnDefinition Width="1*" />
                                    <ColumnDefinition Width="50" />
                                    <ColumnDefinition Width="50" />
                                </Grid.ColumnDefinitions>

                                <StackLayout Grid.Row="0" Grid.Column="0" Grid.RowSpan="2" Orientation="Vertical" >
                                    <BoxView WidthRequest="30" HeightRequest="30" CornerRadius="15" VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"></BoxView>
                                </StackLayout>

                                <Label Grid.Row="0" Grid.Column="1" Text="{Binding Username}" FontSize="16" HorizontalOptions="StartAndExpand" VerticalOptions="EndAndExpand" />
                                <Label Grid.Row="1" Grid.Column="1" Text="Offline" FontSize="14" TextColor="DarkGrey" HorizontalOptions="StartAndExpand" VerticalOptions="StartAndExpand" />
                                

                                <StackLayout Grid.Row="0" Grid.Column="2" Grid.RowSpan="2" Orientation="Vertical" >
                                    <Button MaximumWidthRequest="30" MinimumWidthRequest="30"  MaximumHeightRequest="30" MinimumHeightRequest="30"
                                            CornerRadius="15" VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"></Button>
                                </StackLayout>
                                
                                
                                <StackLayout Grid.Row="0" Grid.Column="3" Grid.RowSpan="2" Orientation="Vertical" >
                                    <BoxView WidthRequest="30" HeightRequest="30" CornerRadius="15" VerticalOptions="CenterAndExpand" HorizontalOptions="StartAndExpand"></BoxView>
                                </StackLayout>

                                <BoxView Grid.Row="0" Grid.Column="0" HeightRequest="1" Grid.ColumnSpan="4" BackgroundColor="#4d4d4d" VerticalOptions="Start" />

                            </Grid>
                            
                            
                            
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </StackLayout>
            </ScrollView>









        </Grid>

















        <!-- Add friends Tab -->
        <Grid Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Grid.RowSpan="2" BackgroundColor="#313338" IsVisible="{Binding IsAddFriendVisible}">
            <!-- One Row -->
            <Grid.RowDefinitions>
                <RowDefinition Height="155" />
                <RowDefinition Height="1*" />
            </Grid.RowDefinitions>

            <!-- One columns -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>



            <Grid Grid.Row="0" Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="65" />
                    <RowDefinition Height="1*" />
                </Grid.RowDefinitions>

                <!-- One columns -->
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*" />
                </Grid.ColumnDefinitions>

                <Label Grid.Row="0" Grid.Column="0" Text="ADD FRIEND" HorizontalOptions="Start" VerticalOptions="Start" TextColor="white" FontSize="15" FontAttributes="Bold" Margin="35,15,0,0"/>

                <Label Grid.Row="0" Grid.Column="0" Text="You can add friends with their Discord username." HorizontalOptions="Start" VerticalOptions="End" TextColor="#869BA4" FontSize="12" Margin="35,10,0,0"/>



                <Border  Grid.Row="1" Grid.Column="0" Stroke="#1e1f22" StrokeShape="RoundRectangle 5,5,5,5" StrokeThickness="0" Background="#1e1f22" HorizontalOptions="FillAndExpand" VerticalOptions="Center" HeightRequest="45" Margin="30,0">
                    <StackLayout Orientation="Horizontal">
                        <Entry x:Name="AddFriendsSeachBar" Placeholder="You can add friends with their username." BackgroundColor="Transparent"  HorizontalOptions="FillAndExpand" VerticalOptions="StartAndExpand"  TextColor="#8597a4" FontSize="16" HeightRequest="45" MinimumHeightRequest="45" />


                        <Button
            Text="Send Friend Request"
            WidthRequest="150"
            HeightRequest="25"
            MaximumHeightRequest="30"
            Padding="0,0,0,0"
            MinimumHeightRequest="30"
            Margin="10,0"
            FontSize="12"
            CornerRadius="2"
            
            HorizontalOptions="Center"
            VerticalOptions="Center"
            BackgroundColor="#5865f2"
            TextColor="White"
            Command="{Binding SendFriendRequest}"
            CommandParameter="{Binding Text, Source={x:Reference AddFriendsSeachBar}}" >

                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroupList>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal">
                                            <VisualState.Setters>
                                                <Setter Property="Scale" Value="1" />
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="Pressed">
                                            <VisualState.Setters>
                                                <Setter Property="Scale" Value="0.90" />
                                            </VisualState.Setters>
                                        </VisualState>
                                        <VisualState x:Name="PointerOver" >
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="#4752c4"/>
                                            </VisualState.Setters>
                                        </VisualState>

                                    </VisualStateGroup>
                                </VisualStateGroupList>
                            </VisualStateManager.VisualStateGroups>
                        </Button>

                    </StackLayout>
                </Border>

            </Grid>

            <BoxView HeightRequest="1" Grid.Row="1" Grid.Column="0"  BackgroundColor="#3f4147" VerticalOptions="Start" />

            <Label Grid.Row="1" Grid.Column="0" Text="OTHER PLACES TO MAKE FRIENDS" HorizontalOptions="Start" VerticalOptions="Start" TextColor="white" FontSize="15" FontAttributes="Bold" Margin="35,15,0,0"/>


        </Grid>

    </Grid>
    
</ContentView>
